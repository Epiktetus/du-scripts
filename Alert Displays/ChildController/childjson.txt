{"slots":{"0":{"name":"slot1","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"looptime = 2 --export: Seconds between screen updates\ntext = \"\"\n\nfunction findDB()\n    for key, value in pairs(unit) do\n        if type(value) == \"table\" and type(value.export) == \"table\" then\n            if value.getElementClass then\n                if value.getElementClass() == \"DataBankUnit\" then\n                    return value\n                end\n            end\n        end\n    end\n    return 0\nend\n\nfunction findScreens()\n    local screens = {}\n    for key, value in pairs(unit) do\n        if type(value) == \"table\" and type(value.export) == \"table\" then\n            if value.getElementClass then\n                if value.getElementClass() == \"ScreenUnit\" then\n                    ChildScreenCount = ChildScreenCount + 1\n                    table.insert(screens, value)\n                end\n            end\n        end\n    end\n    return screens\nend\n\nChildScreenCount = 0\nChildScreens = findScreens()\nDB = findDB()\n\nif DB == 0 then\n    system.print(\"connect a DataBank\")\n    unit.exit()\nend\n\nunit.setTimer(\"update\", looptime)\n","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"0"},{"code":"if text ~= DB.getStringValue(\"CurrentAlert\") then\n    text = DB.getStringValue(\"CurrentAlert\")\n    for i = 1, ChildScreenCount do\n        ChildScreens[i].setCenteredText(text)\n    end\nend","filter":{"args":[{"value":"update"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"1"}],"methods":[],"events":[]}